services:
  frontend_node:
    stdin_open: true
    container_name: "ready_addon_frontend_vue"
    build:
      context: ../
      dockerfile: ./dockerfiles/node.dockerfile
    volumes:
      - ../app:/var/www/html:delegated
    ports:
      - "3022:3021"
    networks:
      - ready_addon
    command: npm install

  frontend_nginx:
    container_name: "ready_addon_frontend_nginx"
    build:
      context: ../
      dockerfile: ./dockerfiles/nginx.dockerfile
      args:
        - UID=${UID:-1000}
        - GID=${GID:-1000}
    ports:
      - "3000:80"
    volumes:
      - ../app:/var/www/html:delegated
      - ../mount/nginx/log:/var/log/nginx/
    depends_on:
      - backend_php
      - backend_redis
      - backend_postgresql
    networks:
      - ready_addon
    restart: unless-stopped